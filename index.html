<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="笔记记录">
<meta property="og:type" content="website">
<meta property="og:title" content="朝日">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="朝日">
<meta property="og:description" content="笔记记录">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="朝日">
<meta name="twitter:description" content="笔记记录">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-cn'
  };
</script>

  <title>朝日</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="朝日" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">朝日</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ZhaoriGame</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/zhaorigame" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/03/02/Unity-编辑器-内置GUIStyle查看工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/02/Unity-编辑器-内置GUIStyle查看工具/" class="post-title-link" itemprop="url">Unity 编辑器-内置GUIStyle查看工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-03-02 14:52:10 / Modified: 14:54:49" itemprop="dateCreated datePublished" datetime="2023-03-02T14:52:10+08:00">2023-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <pre><code>using UnityEngine;
using UnityEditor;
using System.Reflection;

/// &lt;summary&gt;
/// Unity 自带的 GUIStyle 效果查看器
/// &lt;/summary&gt;
public class GUIStyleViewerUtil : EditorWindow
{
    /// &lt;summary&gt;
    /// 滑动条
    /// &lt;/summary&gt;
    private Vector2 mScrollView = Vector2.zero;
    /// &lt;summary&gt;
    /// 寻找的样式名称
    /// &lt;/summary&gt;
    private string mSearchStyle = "";
    /// &lt;summary&gt;
    /// 样式缓存
    /// &lt;/summary&gt;
    private static GUIStyle mBtnStyle;
  [MenuItem("Util/GUIStyle 效果查看器")]
  private static void MenuClicked()
  {
      GetWindow&lt;GUIStyleViewerUtil&gt;("GUIStyle查看器", true);
      // 初始化一个按钮的样式
      mBtnStyle = GetBtnStyle();
  }

  private void OnGUI()
  {
      GUILayout.Space(20);

      // 设置一个查找的功能
      GUILayout.BeginHorizontal("HelpBox");
      GUILayout.Space(20);
      mSearchStyle = EditorGUILayout.TextField("", mSearchStyle, "SearchTextField");
      GUILayout.Label("", "SearchCancelButtonEmpty");
      GUILayout.EndHorizontal();

      // 设置滚动栏
      mScrollView = GUILayout.BeginScrollView(mScrollView);
      // 遍历并显示所有符合条件的 Unity 自带的 GUIStyle
      foreach (GUIStyle style in GUI.skin.customStyles)
      {
          if (style.name.ToLower().Contains(mSearchStyle.ToLower()))
          {
              GUILayout.Space(10);
              // 为了让显示的布局看着更舒服一些，需要以当前 style 为原型新建一个 GUIStyle
              // 因为接下来可能会对文字居中等方面进行调整，
              // 而如果直接更改原来的 style，则会导致系统中的对应 UI 样式和布局也发生改变
              GUIStyle tmp = new GUIStyle(style);
              DrawStyleItem(tmp);
          }
      }
      GUILayout.EndScrollView();
  }

  /// &lt;summary&gt;
  /// 绘制对应的 GUIStyle
  /// &lt;/summary&gt;
  /// &lt;param name="style"&gt;&lt;/param&gt;
  private void DrawStyleItem(GUIStyle style)
  {

      GUILayout.BeginHorizontal("box", GUILayout.Height(style.fixedHeight));
      GUILayout.Space(20);
      // 获取按钮样式
      GUIStyle tmp = mBtnStyle;

      // 设置第一个按钮，点击后可以复制当前 GUIStyle 的名字信息
      if (GUILayout.Button("&lt;color=#000000FF&gt;复制到剪贴板&lt;/color&gt;", tmp))
      {
          GUIUtility.systemCopyBuffer = style.name;
      }

      GUILayout.Space(20);

      // 设置第二个按钮，点击后在控制台输出该 GUIStyle 的设置参数
      if (GUILayout.Button("&lt;color=#FFFFFFFF&gt;查看Style参数&lt;/color&gt;", tmp))
      {
          ShowGUIStyleMsg(style.name);
      }
      GUILayout.Space(30);

      // 显示当前 GUIStyle 的名字
      EditorGUILayout.SelectableLabel(style.name);

      // 设置左右对称布局，以此为分界线，把前后的布局对称
      GUILayout.FlexibleSpace();

      // 设置文本居中显示
      style.alignment = TextAnchor.MiddleCenter;
      // 显示当前的样式及其名称
      EditorGUILayout.SelectableLabel(style.name, style);

      GUILayout.Space(100);

      // 单独显示样式
      EditorGUILayout.SelectableLabel("", style,
                                      GUILayout.Height(style.fixedHeight),
                                       GUILayout.Width(style.fixedWidth));
      GUILayout.Space(100);

      GUILayout.EndHorizontal();
  }

  /// &lt;summary&gt;
  /// 创建一个按钮样式，用来作为本界面中的按钮基础
  /// &lt;/summary&gt;
  /// &lt;returns&gt;&lt;/returns&gt;
  public static GUIStyle GetBtnStyle()
  {
      // 使用系统自带的 "AC Button" 样式作为原型，因为 "AC Button" 本身就具有点击效果了
      GUIStyle style = new GUIStyle("AC Button");

      // 将样式的点击时的效果图，替换为系统自带的 "flow node 4 on" 样式
      GUIStyle active = new GUIStyle("flow node 4 on");
      style.active.background = active.normal.background;

      // 将平时按钮的效果图，替换为系统自带的 "flow node 4" 样式
      GUIStyle normal = new GUIStyle("flow node 4");
      style.normal.background = normal.normal.background;

      // 参考 "flow node 4" 的内部参数，设置一些图片的参数。
      // 如果不设置的话，则图片会按照原 "AC Button" 的样式进行显示
      // 因为图片不一样，所以会有显示上的问题。
      style.stretchHeight = true;
      style.stretchWidth = true;
      style.border = new RectOffset(11, 11, 11, 15);
      style.margin = new RectOffset(0, 0, 0, 0);
      style.padding = new RectOffset(0, 0, 0, 0);
      style.overflow = new RectOffset(7, 7, 6, 9);

      // 进行文本方面的设置
      style.alignment = TextAnchor.MiddleCenter;
      style.fontSize = 18;
      style.richText = true;

      return style;
  }

  /// &lt;summary&gt;
  /// 展示指定的 GUI 样式的一些数值
  /// &lt;/summary&gt;
  /// &lt;param name="style"&gt;&lt;/param&gt;
  public void ShowGUIStyleMsg(string style)
  {
      // 清空控制台信息，防止混淆
      ClearConsole();

      GUIStyle tmp = new GUIStyle(style);
      Debug.Log("Style Name: " + tmp.name);
      Debug.Log("Style Normal: " + tmp.normal.background);
      Debug.Log("Style Normal Color: " + tmp.normal.textColor);
      Debug.Log("Style Active: " + tmp.active.background);
      Debug.Log("Style Active Color: " + tmp.active.textColor);
      Debug.Log("Style Hover: " + tmp.hover.background);
      Debug.Log("Style Hover Color: " + tmp.hover.textColor);
      Debug.Log("Style Focused: " + tmp.focused.background);
      Debug.Log("Style Focused Color: " + tmp.focused.textColor);
      Debug.Log("Style border: " + tmp.border);
      Debug.Log("Style margin: " + tmp.margin);
      Debug.Log("Style padding: " + tmp.padding);
      Debug.Log("Style overflow: " + tmp.overflow);
      Debug.Log("Style fixedWidth: " + tmp.fixedWidth);
      Debug.Log("Style fixedHeight: " + tmp.fixedHeight);
      Debug.Log("Style stretchWidth: " + tmp.stretchWidth);
      Debug.Log("Style stretchHeight: " + tmp.stretchHeight);
      Debug.Log("Style lineHeight: " + tmp.lineHeight);
      Debug.Log("Style Font: " + tmp.font);
      Debug.Log("Style Font Size: " + tmp.fontSize);
  }

  public void ClearConsole()
  {
      Assembly assembly = Assembly.GetAssembly(typeof(SceneView));

      System.Type type = assembly.GetType("UnityEditor.LogEntries");
      MethodInfo method = type.GetMethod("Clear");
      method.Invoke(new object(), null);

  }
}
</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/03/02/宝藏网站（持续更新）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/02/宝藏网站（持续更新）/" class="post-title-link" itemprop="url">宝藏网站（持续更新）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-03-02 14:47:39 / Modified: 14:48:58" itemprop="dateCreated datePublished" datetime="2023-03-02T14:47:39+08:00">2023-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Commom/" itemprop="url" rel="index"><span itemprop="name">Commom</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><a href="https://convertio.co/zh/" target="_blank" rel="noopener">在线格式转换器</a></p>
<p><a href="https://www.aplaybox.com/" target="_blank" rel="noopener">模之屋</a></p>
<h2 id="图形相关"><a href="#图形相关" class="headerlink" title="图形相关"></a>图形相关</h2><p><a href="https://roystan.net/articles/" target="_blank" rel="noopener">Roystan</a></p>
<p><a href="https://www.shadertoy.com/" target="_blank" rel="noopener">Shadertoy</a></p>
<p><a href="https://catlikecoding.com/unity/tutorials/custom-srp/draw-calls/#2.1" target="_blank" rel="noopener">Draw Calls</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/433385999" target="_blank" rel="noopener">菜鸡都能学会的Unity草地shader</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/47575695" target="_blank" rel="noopener">肥皂泡的渲染（薄膜干涉）</a></p>
<p><a href="https://www.zhihu.com/column/c_1215952152252121088" target="_blank" rel="noopener">从零开始的卡通渲染</a></p>
<h2 id="编辑器相关"><a href="#编辑器相关" class="headerlink" title="编辑器相关"></a>编辑器相关</h2><p><a href="https://blog.csdn.net/alexhu2010q/article/details/118053288" target="_blank" rel="noopener">UnityGraphView</a></p>
<p><a href="https://blog.csdn.net/alexhu2010q/article/details/118053288" target="_blank" rel="noopener">Unity的GraphView</a></p>
<p><a href="https://focus-creative-games.github.io/hybridclr/about/#文档" target="_blank" rel="noopener">HybridCLR</a></p>
<h2 id="大佬的个人网站"><a href="#大佬的个人网站" class="headerlink" title="大佬的个人网站"></a>大佬的个人网站</h2><p><a href="https://yremp.live/" target="_blank" rel="noopener">Yremp</a></p>
<p><a href="https://2heng.xin/" target="_blank" rel="noopener">Mashiro</a></p>
<p><a href="http://walkingfat.com/" target="_blank" rel="noopener">Walkingfat</a></p>
<p><a href="https://www.patreon.com/minionsart/" target="_blank" rel="noopener">Minionsart</a></p>
<p><a href="https://www.lfzxb.top/" target="_blank" rel="noopener">烟雨迷离半世殇</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/03/02/记录一些HLSL常用函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/02/记录一些HLSL常用函数/" class="post-title-link" itemprop="url">记录一些HLSL常用函数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-03-02 14:40:17 / Modified: 14:42:08" itemprop="dateCreated datePublished" datetime="2023-03-02T14:40:17+08:00">2023-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/HLSL/" itemprop="url" rel="index"><span itemprop="name">HLSL</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>查看函数图像网站：<a href="https://graphtoy.com/" target="_blank" rel="noopener">https://graphtoy.com/</a></p>
<h2 id="基础数学运算"><a href="#基础数学运算" class="headerlink" title="基础数学运算"></a>基础数学运算</h2><ul>
<li>max（a, b） 返回较大的数</li>
<li>min（a, b） 返回较小的数</li>
<li>mul（a, b） 两变量相乘，常用于矩阵运算</li>
<li>abs（a） 返回a的绝对值</li>
<li>round (x) 返回与x最近的整数</li>
<li>sqrt (x) 返回x的平方根</li>
<li>rsqrt (x) 返回x的平方根的倒数</li>
<li>degrees (x) 弧度转角度</li>
<li>redians (x) 角度转弧度</li>
<li>noise (x) 噪声</li>
</ul>
<h2 id="幂指对函数"><a href="#幂指对函数" class="headerlink" title="幂指对函数"></a>幂指对函数</h2><ul>
<li>pow (x, y) x的y次幂</li>
<li>exp (x) 返回e为底的指数函数</li>
<li>exp2 (value x) 返回以2位底，x为指数幂</li>
<li>ldexp (x, exp) 返回与2exp次方的乘积</li>
<li>log (x) 返回指定值得以e为底数的对数</li>
<li>log10 (x) 求以10为底的对数</li>
<li>log2 (x) 求以2为底的对数</li>
<li>frexp (x , out exp) 将浮点数分解成尾数和指数，x的返回值是尾数,exp参数返回的值是指数</li>
</ul>
<h2 id="三角函数和双曲线函数"><a href="#三角函数和双曲线函数" class="headerlink" title="三角函数和双曲线函数"></a>三角函数和双曲线函数</h2><ul>
<li>sin（x）、cos（x）、tan（x） 三角函数</li>
<li>asin（x）、acos（x）、atan（x） 反三角函数</li>
<li>sincos（x，out s，out c） 返回x的正弦和余弦</li>
<li>tan（y，x） 返回y/x的正切</li>
<li>atan2（y，x） 返回y/x的反正切</li>
<li>sinh（x） 返回x的双曲正弦值</li>
<li>cosh（x） 返回x的双曲余弦值</li>
<li>tanh（x） 返回x的双曲正弦值</li>
</ul>
<h2 id="处理数值函数"><a href="#处理数值函数" class="headerlink" title="处理数值函数"></a>处理数值函数</h2><ul>
<li>ceil（x） 返回&gt;=x的最小整数（向下取整）</li>
<li>floor（x） 返回&lt;=x的最大整数（向上取整）</li>
<li>step（x，y） x&lt;=y返回1，否则返回0</li>
<li>saturate（x） 返回将x钳制到[0,1]范围之间的值</li>
<li>clamp（x，min，max） 将x限制在[min，max]范围的值，比min小返回min，比max大返回max</li>
<li>fmord（x，y） 返回x对y取余的余数</li>
<li>frac（x） 取x的小数部分</li>
<li>modf（x，out ip） 将x分为小数和整数部分（输出的ip为整数部分，返回值为小数部分）</li>
<li>lerp（x，y，s） 按照s在x到y之间插值，返回</li>
<li>smoothstep（min，max，x） 如果x在[min，max]范围内，就返回介于[0，1]之间的平滑Hermite插值，使用smoothstep在两个值创建平滑过渡</li>
</ul>
<h2 id="条件判断函数"><a href="#条件判断函数" class="headerlink" title="条件判断函数"></a>条件判断函数</h2><ul>
<li>all（x） 确定指定量的所有分量是否均为非零，均非零则返回true，否则返回false</li>
<li>clip（x） 如果输入值小于零，则丢弃当前像素 常用于判定范围(不仅仅针对0,返回值为void) <strong>常用于Alpha测试，如果每个分量代表到平面的距离，还可以用来模拟剪切平面</strong></li>
<li>sign（x） 返回x的正负性 如果x小于零返回-1，如果x等于零返回0，如果x大于零返回1</li>
<li>isinf（x） 如果x参数为+ INF或-INF(无穷+无穷仍无穷，0x3f3f3f3f)，返回true，否则返回False</li>
<li>isfinite（x） 判断x参数是有限，即有界的，与isinf(x)相反</li>
<li>isnan（x） 如果x参数为NAN(非数字)，返回true，否则返回false</li>
</ul>
<h2 id="向量和矩阵函数"><a href="#向量和矩阵函数" class="headerlink" title="向量和矩阵函数"></a>向量和矩阵函数</h2><ul>
<li>length(v) 返回向量的长度</li>
<li>normalize(v) 向量归一化</li>
<li>distance(a,b) 返回两个向量之间的距离，不平行的两个向量应该为0，此处表示为根号下各分量之差的平方和</li>
<li>dot(a,b) 返回a和b两向量的点积</li>
<li>cross(a,b) 返回a和b两向量的叉积，返回值是向量，并且与a,b都垂直</li>
<li>determinant(m) 返回指定浮点矩阵的按行列式方式计算的值</li>
<li>transpose(m) 返回矩阵m的转置矩阵</li>
</ul>
<h2 id="光线预算函数"><a href="#光线预算函数" class="headerlink" title="光线预算函数"></a>光线预算函数</h2><ul>
<li>reflect(i,n) 以i为入射向量n为法线方向的反射光</li>
<li>refract(i,n,ri) 以i为入射向量n为法线方向,ri为折射率的折射光</li>
<li>lit(n_dot_l,n_dot_h，m) 输入标量(normal,light,半角向量h,镜面反射系数m) 返回光照向量(环境光，漫反射光，镜面高光反射，1)<strong>该计算依据的是BlingPhong光照模型</strong></li>
<li>faceforward(n,i,ng) 得到面向视图方向的曲面法向量输入输出为同元向量,返回-n*sign(dot(i,ng))(normal,light,normal)</li>
</ul>
<h2 id="纹理查找函数"><a href="#纹理查找函数" class="headerlink" title="纹理查找函数"></a>纹理查找函数</h2><h3 id="1D纹理查找函数"><a href="#1D纹理查找函数" class="headerlink" title="1D纹理查找函数"></a>1D纹理查找函数</h3><ul>
<li>tex1D(s, t) 普通一维纹理查找 返回纹理采样器s在标量t位置的color4</li>
<li>tex1D(s,t,ddx,ddy) 使用微分查询一维纹理， t和ddxy均为vector</li>
<li>tex1Dlod(s, t) 使用LOD查找纹理s在t.w位置的color4</li>
<li>tex1Dbias(s, t) 将t.w决定的某个MIP层偏置后的一维纹理查找</li>
<li>tex1Dgrad(s,t,ddx,ddy) 使用微分并指定MIP层的一维纹理查找</li>
<li>tex1Dproj(s, t) 把纹理当做一张幻灯片投影到场景中，先使用投影纹理技术需要计算出投影纹理坐标t(坐标t.w除以透视值)，然后使用投影纹理坐标进行查询</li>
</ul>
<h3 id="2D纹理查找函数"><a href="#2D纹理查找函数" class="headerlink" title="2D纹理查找函数"></a>2D纹理查找函数</h3><ul>
<li>tex2D(s, t) 普通二维纹理查找 返回纹理采样器s在vector t位置的颜色</li>
<li>ex2D(s,t,ddx,ddy) 使用微分查询二维纹理，t和ddxy均为vector</li>
<li>tex2Dlod(s, t) 使用LOD查找纹理s在t.w位置的color4</li>
<li>tex2Dbias(s, t) 将t.w决定的某个MIP层偏置后的二维纹理查找</li>
<li>tex2Dgrad(s,t,ddx,ddy) 使用微分并指定MIP层的二维纹理查找</li>
<li>tex2Dproj(s, t) 把纹理当做一张幻灯片投影到场景中，先使用投影纹理技术需要计算出投影纹理坐标t(坐标t.w除以透视值)，然后使用投影纹理坐标进行查询</li>
</ul>
<h3 id="3D纹理查找函数"><a href="#3D纹理查找函数" class="headerlink" title="3D纹理查找函数"></a>3D纹理查找函数</h3><ul>
<li>tex3D(s, t) 普通三维纹理查找 返回纹理采样器s在vector t位置的颜色</li>
<li>ex3D(s,t,ddx,ddy) 使用微分查询三维纹理，t和ddxy均为vector</li>
<li>tex3Dlod(s, t) 使用LOD查找纹理s在t.w位置的color4</li>
<li>tex3Dbias(s, t) 将t.w决定的某个MIP层偏置后的三维纹理查找</li>
<li>tex3Dgrad(s,t,ddx,ddy) 使用微分并指定MIP层的三维纹理查找</li>
<li>tex3Dproj(s, t) 把纹理当做一张幻灯片投影到场景中，先使用投影纹理技术需要计算出投影纹理坐标t(坐标t.w除以透视值)，然后使用投影纹理坐标进行查询</li>
</ul>
<h3 id="立体纹理查找"><a href="#立体纹理查找" class="headerlink" title="立体纹理查找"></a>立体纹理查找</h3><ul>
<li>texCUBE(s,t) 返回纹理采样器s在vector t位置的颜色</li>
<li>texCUBE(s,t,ddx,ddy) 使用微分查询立方体维纹理 ，t和ddxy均为vector</li>
<li>texCUBEDload(s,t) 使用LOD查找纹理s在t.w位置的color4</li>
<li>texCUBEbias(s,t) 将t.w决定的某个MIP层偏置后的立方体纹理查找</li>
<li>texCUBEgrad(s,t,ddx,ddy) 使用微分并指定MIP层的立方体纹理查找</li>
<li>texCUBEproj(s,t) 使用投影方式的立方体纹理查找</li>
</ul>
<h2 id="偏导函数ddx和ddy"><a href="#偏导函数ddx和ddy" class="headerlink" title="偏导函数ddx和ddy"></a>偏导函数ddx和ddy</h2><p>ddx(vector3)、ddy(vector3) ddx 和 ddy 用于求取相邻像素间某属性的差值</p>
<p><img src="http://acgloby.com/wp-content/uploads/2021/11/ddx.png" alt="img"></p>
<h3 id="Core-hlsl"><a href="#Core-hlsl" class="headerlink" title="Core.hlsl"></a>Core.hlsl</h3><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GetVertexPositionInputs(float3 positionOS)</td>
<td>获取输入顶点坐标信息</td>
</tr>
<tr>
<td>GetVertexNormalInputs(float3 normalOS)</td>
<td>获取输入顶点法线信息</td>
</tr>
<tr>
<td>GetVertexNormalInputs(float3 normalOS, float4 tangentOS)</td>
<td>获取输入顶点法线信息（重载）</td>
</tr>
<tr>
<td>GetScaledScreenParams()</td>
<td>获取屏幕缩放参数信息</td>
</tr>
<tr>
<td>NormalizeNormalPerVertex(real3 normalWS)</td>
<td>逐顶点法线正交</td>
</tr>
<tr>
<td>NormalizeNormalPerPixel(real3 normalWS)</td>
<td>逐像素法线正交</td>
</tr>
<tr>
<td>ComputeScreenPos(float4 positionCS)</td>
<td>计算屏幕坐标信息</td>
</tr>
<tr>
<td>（real）ComputeFogFactor(float z)</td>
<td>计算雾参数</td>
</tr>
<tr>
<td>（real）ComputeFogIntensity(real fogFactor)</td>
<td>计算雾强度</td>
</tr>
<tr>
<td>（half3）MixFogColor(real3 fragColor, real3 fogColor, real fogFactor)</td>
<td>混合雾颜色</td>
</tr>
<tr>
<td>（half3）MixFog(real3 fragColor, real fogFactor)</td>
<td>混合雾</td>
</tr>
</tbody>
</table>
<h3 id="Lighting-hlsl"><a href="#Lighting-hlsl" class="headerlink" title="Lighting.hlsl"></a>Lighting.hlsl</h3><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>DistanceAttenuation(float distanceSqr, half2 distanceAttenuation)</td>
<td>距离衰减</td>
</tr>
<tr>
<td>AngleAttenuation(half3 spotDirection, half3 lightDirection, half2 spotAttenuation)</td>
<td>角度衰减</td>
</tr>
<tr>
<td>GetMainLight()/GetMainLight(float4 shadowCoord)</td>
<td>获取主光源</td>
</tr>
<tr>
<td>GetPerObjectLightIndex(int index)</td>
<td>获取每个对象灯光Index</td>
</tr>
<tr>
<td>GetAdditionalLightsCount()</td>
<td>获取额外灯光数量</td>
</tr>
<tr>
<td>ReflectivitySpecular(half3 specular)</td>
<td>高光反射率</td>
</tr>
<tr>
<td>OneMinusReflectivityMetallic(half metallic)</td>
<td>OneMinus金属反射率</td>
</tr>
<tr>
<td>InitializeBRDFData(half3 albedo, half metallic, half3 specular, half smoothness, half alpha, out BRDFData outBRDFData)</td>
<td>初始化BRDF</td>
</tr>
<tr>
<td>EnvironmentBRDF(BRDFData brdfData, half3 indirectDiffuse, half3 indirectSpecular, half fresnelTerm)</td>
<td>环境BRDF</td>
</tr>
<tr>
<td>DirectBDRF(BRDFData brdfData, half3 normalWS, half3 lightDirectionWS, half3 viewDirectionWS)</td>
<td>BRDF</td>
</tr>
<tr>
<td>SampleLightmap(float2 lightmapUV, half3 normalWS)</td>
<td>光照贴图</td>
</tr>
<tr>
<td>GlossyEnvironmentReflection(half3 reflectVector, half perceptualRoughness, half occlusion)</td>
<td>环境光泽反射</td>
</tr>
<tr>
<td>GlobalIllumination(BRDFData brdfData, half3 bakedGI, half occlusion, half3 normalWS, half3 viewDirectionWS)</td>
<td>全局光照</td>
</tr>
<tr>
<td>MixRealtimeAndBakedGI(inout Light light, half3 normalWS, inout half3 bakedGI, half4 shadowMask)</td>
<td>实时烘培混合</td>
</tr>
<tr>
<td>LightingLambert(half3 lightColor, half3 lightDir, half3 normal)</td>
<td>兰伯特模型</td>
</tr>
<tr>
<td>LightingSpecular(half3 lightColor, half3 lightDir, half3 normal, half3 viewDir, half4 specular, half smoothness)</td>
<td>高光</td>
</tr>
<tr>
<td>LightingPhysicallyBased(BRDFData brdfData, half3 lightColor, half3 lightDirectionWS, half lightAttenuation, half3 normalWS, half3 viewDirectionWS)/LightingPhysicallyBased(BRDFData brdfData, Light light, half3 normalWS, half3 viewDirectionWS)</td>
<td>基于物理的光照模型</td>
</tr>
<tr>
<td>VertexLighting(float3 positionWS, half3 normalWS)</td>
<td>顶点光照颜色</td>
</tr>
<tr>
<td>LightweightFragmentPBR(InputData inputData, half3 albedo, half metallic, half3 specular,half smoothness, half occlusion, half3 emission, half alpha)</td>
<td>轻量级片元PBR</td>
</tr>
<tr>
<td>LightweightFragmentBlinnPhong(InputData inputData, half3 diffuse, half4 specularGloss, half smoothness, half3 emission, half alpha)</td>
<td>轻量级片元布林·冯</td>
</tr>
</tbody>
</table>
<h3 id="Shadows-hlsl"><a href="#Shadows-hlsl" class="headerlink" title="Shadows.hlsl"></a>Shadows.hlsl</h3><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GetMainLightShadowStrength()</td>
<td>获取主光源阴影强度</td>
</tr>
<tr>
<td>GetAdditionalLightShadowStrenth(int lightIndex)</td>
<td>获取额外光源阴影强度</td>
</tr>
<tr>
<td>SampleScreenSpaceShadowmap(float4 shadowCoord)</td>
<td>屏幕空间阴影贴图</td>
</tr>
<tr>
<td>SampleShadowmap(float4 shadowCoord, TEXTURE2D_SHADOW_PARAM(ShadowMap, sampler_ShadowMap), ShadowSamplingData samplingData, half shadowStrength, bool isPerspectiveProjection = true)</td>
<td>阴影贴图</td>
</tr>
<tr>
<td>TransformWorldToShadowCoord(float3 positionWS)</td>
<td>把顶点的世界坐标转换到阴影坐标</td>
</tr>
<tr>
<td>MainLightRealtimeShadow(float4 shadowCoord)</td>
<td>主光源实时阴影</td>
</tr>
<tr>
<td>AdditionalLightRealtimeShadow(int lightIndex, float3 positionWS)</td>
<td>额外光源实时阴影</td>
</tr>
<tr>
<td>GetShadowCoord(VertexPositionInputs vertexInput)</td>
<td>获取阴影坐标信息</td>
</tr>
<tr>
<td>ApplyShadowBias(float3 positionWS, float3 normalWS, float3 lightDirection)</td>
<td>应用阴影偏移</td>
</tr>
</tbody>
</table>
<h3 id="SpaceTransforms-hlsl"><a href="#SpaceTransforms-hlsl" class="headerlink" title="SpaceTransforms.hlsl"></a>SpaceTransforms.hlsl</h3><table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>TransformObjectToWorld(float3 positionOS)</td>
<td>当前模型空间转世界空间矩阵，通常用于把顶点/方向矢量从模型空间转到世界空间</td>
</tr>
<tr>
<td>TransformWorldToObject(float3 positionWS)</td>
<td>当前世界空间转模型空间矩阵，通常用于把顶点/方向矢量从世界空间转到模型空间</td>
</tr>
<tr>
<td>TransformWorldToView(float3 positionWS)</td>
<td>当前世界空间转相机空间矩阵，通常用于把顶点/方向矢量从世界空间转到相机空间</td>
</tr>
<tr>
<td>TransformObjectToHClip(float3 positionOS)</td>
<td>当前模型空间转裁剪空间矩阵，通常用于把顶点/方向矢量从模型空间转到裁剪空间</td>
</tr>
<tr>
<td>TransformWorldToHClip(float3 positionWS)</td>
<td>当前世界空间转裁剪空间矩阵，通常用于把顶点/方向矢量从世界空间转到裁剪空间</td>
</tr>
<tr>
<td>TransformWViewToHClip(float3 positionVS)</td>
<td>当前相机空间转裁剪空间矩阵，通常用于把顶点/方向矢量从相机空间转到裁剪空间</td>
</tr>
<tr>
<td>TransformObjectToWorldDir(real3 dirOS)</td>
<td>把方向矢量从模型空间转换到世界空间中</td>
</tr>
<tr>
<td>TransformWorldToObjectDir(real3 dirWS)</td>
<td>把方向矢量从世界空间转换到模型空间中</td>
</tr>
<tr>
<td>TransformWorldToViewDir(real3 dirWS)</td>
<td>把方向矢量从世界空间转换到相机空间中</td>
</tr>
<tr>
<td>TransformWorldToHClipDir(real3 directionWS)</td>
<td>把方向矢量从世界空间转换到裁剪空间中</td>
</tr>
<tr>
<td>TransformObjectToWorldNormal(float3 normalOS)</td>
<td>把法线从模型空间转换到世界空间中</td>
</tr>
<tr>
<td>CreateTangentToWorld(real3 normal, real3 tangent, real flipSign)</td>
<td>创建一个切线空间转为世界空间的3x3矩阵</td>
</tr>
<tr>
<td>TransformTangentToWorld(real3 dirTS, real3x3 tangentToWorld)</td>
<td>当前切线空间转世界空间矩阵，通常用于把顶点/方向矢量从切线空间转到世界空间</td>
</tr>
<tr>
<td>TransformWorldToTangent(real3 dirWS, real3x3 tangentToWorld)</td>
<td>当前世界空间转切线空间矩阵，通常用于把顶点/方向矢量从世界空间转到切线空间</td>
</tr>
<tr>
<td>TransformTangentToObject(real3 dirTS, real3x3 tangentToWorld)</td>
<td>当前切线空间转模型空间矩阵，通常用于把顶点/方向矢量从切线空间转到模型空间</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2023/02/25/Unity-Shader-Build-In-To-HLSL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/25/Unity-Shader-Build-In-To-HLSL/" class="post-title-link" itemprop="url">Unity Shader Build-In To HLSL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-25 21:25:25" itemprop="dateCreated datePublished" datetime="2023-02-25T21:25:25+08:00">2023-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-27 14:29:42" itemprop="dateModified" datetime="2023-02-27T14:29:42+08:00">2023-02-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="记录一些常用的-Build-In-到-HLSL-的函数"><a href="#记录一些常用的-Build-In-到-HLSL-的函数" class="headerlink" title="记录一些常用的 Build-In 到 HLSL 的函数"></a>记录一些常用的 Build-In 到 HLSL 的函数</h3><h6 id="光照模式"><a href="#光照模式" class="headerlink" title="光照模式"></a>光照模式</h6><table>
<thead>
<tr>
<th style="text-align:left">Bulid - In</th>
<th>URP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ForwardBase</td>
<td>UniversalForward</td>
</tr>
<tr>
<td style="text-align:left">ForwardAdd</td>
<td>开启关键字 _ADDTIONAL_LIGHTS</td>
</tr>
<tr>
<td style="text-align:left">ShadowCaster</td>
<td>ShadowCaster</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/01/14/使用手册/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/14/使用手册/" class="post-title-link" itemprop="url">使用手册</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-14 22:09:46" itemprop="dateCreated datePublished" datetime="2022-01-14T22:09:46+08:00">2022-01-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-17 23:32:30" itemprop="dateModified" datetime="2023-02-17T23:32:30+08:00">2023-02-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HEXO使用手册"><a href="#HEXO使用手册" class="headerlink" title="HEXO使用手册"></a>HEXO使用手册</h1><p>测试和搭建环境</p>
<ul>
<li><code>hexo clean</code>清除了你之前生成的东西，也可以不加。</li>
<li><code>hexo new newpage</code> 新建一个文章</li>
<li><code>hexo generate</code> 顾名思义，生成静态文章，可以用 <code>hexo g</code>缩写</li>
<li><code>hexo deploy</code> 部署文章，可以用<code>hexo d</code>缩写</li>
<li><code>hexo new draft newpage</code> 新建一个 <code>newpage.md</code> 文件</li>
<li><code>hexo publish draft newpage</code>发布post</li>
</ul>
<p><a href="https://blog.csdn.net/sinat_37781304/article/details/82729029" target="_blank" rel="noopener">hexo史上最全搭建教程</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/15/Free-HDRSkybox/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/15/Free-HDRSkybox/" class="post-title-link" itemprop="url">Free_HDRSkybox</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-15 21:28:39" itemprop="dateCreated datePublished" datetime="2019-08-15T21:28:39+08:00">2019-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-17 23:32:30" itemprop="dateModified" datetime="2023-02-17T23:32:30+08:00">2023-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="hdrihaven.com">HDR天空盒</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/13/依赖倒置原则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/13/依赖倒置原则/" class="post-title-link" itemprop="url">依赖倒置原则</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-13 19:50:12" itemprop="dateCreated datePublished" datetime="2019-08-13T19:50:12+08:00">2019-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-17 23:32:30" itemprop="dateModified" datetime="2023-02-17T23:32:30+08:00">2023-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计原则/" itemprop="url" rel="index"><span itemprop="name">设计原则</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计原则：依赖倒置原则"><a href="#设计原则：依赖倒置原则" class="headerlink" title="设计原则：依赖倒置原则"></a>设计原则：依赖倒置原则</h1><p>依赖倒置原则（Dependence Inversion Principle）是程序要依赖于抽象接口，不要依赖于具体实现。简单的说就是要求对抽象进行编程，不要对实现进行编程，这样就降低了客户与实现模块间的耦合。</p>
<p>总结：依赖倒置原则</p>
<ul>
<li>A.高层次的模块不应该依赖于低层次的模块，他们都应该依赖于抽象。</li>
<li>B.抽象不应该依赖于具体，具体应该依赖于抽象。</li>
</ul>
<h2 id="具体例子"><a href="#具体例子" class="headerlink" title="具体例子"></a>具体例子</h2><p>当在 Unity 设计底层模块时，上层模块调用的东西其实就只是一些暴露出来的方法，当底层改动的时候上层也需要改动，这就形成了高层次模块对低层次模块的依赖。这时候可以抽象出来这些需要暴露的方法，即使用接口抽象出来，使得底层依赖了抽象的接口，高层也依赖了抽象的接口，从而使得设计更加清爽。</p>
<p><a href="https://zhuanlan.zhihu.com/p/28401100" target="_blank" rel="noopener">浅谈Unity开发中的分层设计</a> 中也使用了接口抽象的方式，不过是在底层之间的相互依赖中使用了接口，对于上层还是通过暴露公共方法的方式，加了个 模块管理器，来取得具体模块或者具体实现的接口。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/227328/1547347201283-d70ad1a3-3dc9-4b1c-8a60-5911580a7569.jpeg#align=left&amp;display=inline&amp;height=259&amp;originHeight=663&amp;originWidth=1116&amp;size=0&amp;width=436" alt=""></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/13/Design-Pattern-桥接模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/13/Design-Pattern-桥接模式/" class="post-title-link" itemprop="url">Design_Pattern_桥接模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-13 19:49:45" itemprop="dateCreated datePublished" datetime="2019-08-13T19:49:45+08:00">2019-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-17 23:32:30" itemprop="dateModified" datetime="2023-02-17T23:32:30+08:00">2023-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式：桥接模式-Bridge-Pattern"><a href="#设计模式：桥接模式-Bridge-Pattern" class="headerlink" title="设计模式：桥接模式(Bridge Pattern)"></a>设计模式：桥接模式(Bridge Pattern)</h1><p>将类的功能层次结构和实现层次结构相分离，使二者能够独立地变化，并在两者之间搭建桥梁，实现桥接。它是一种对象结构型模式，又称为<strong>柄体(Handle and Body)模式</strong>或<strong>接口(Interfce)模式</strong>。</p>
<p><strong>意图：</strong>在一个软件系统的抽象化和实现化之间使用关联关系（组合或者聚合关系）而<strong>不是继承关系</strong>，从而使两者可以相对独立地变化。</p>
<ul>
<li>将类的功能层次分离开，父类拥有子类所共有的功能，子类里实现新的功能。</li>
<li>将类的实现层次分离开，父类声明抽象方法，子类来实现。</li>
</ul>
<p>桥接模式主要包含以下几个角色</p>
<ul>
<li><strong>Abstraction</strong>：抽象类，抽象了功能的实现。</li>
<li><strong>RefinedAbstraction</strong>：扩充抽象类实现了具体的新的功能，构成功能层次结构。</li>
<li><strong>Implementor</strong>：实现类接口，提供了用于抽象类的接口。</li>
<li><strong>ConcreteImplementor</strong>：具体实现类，构成实现层次结构。</li>
</ul>
<p><strong>现要画一个不同颜色不同形状组合的圆，把抽象化和实现分离开来使其能独立地变化</strong></p>
<p><strong>抽象类：</strong></p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Shape</span></span><br><span class="line">  {</span><br><span class="line">      <span class="keyword">public</span> Color color;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetColor</span>(<span class="params">Color color</span>)</span></span><br><span class="line"><span class="function"></span>      {</span><br><span class="line">          <span class="keyword">this</span>.color = color;</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Draw</span>(<span class="params"></span>)</span>;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p><strong>扩充抽象类</strong></p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Circle</span> : <span class="title">Shape</span></span><br><span class="line">  {</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Draw</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>      {</span><br><span class="line">          color.BePaint(<span class="string">"圆"</span>);</span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Square</span> : <span class="title">Shape</span></span><br><span class="line">  {</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Draw</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>      {</span><br><span class="line">          color.BePaint(<span class="string">"正方形"</span>);</span><br><span class="line">      }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p><strong>实现类的接口：</strong></p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">Color</span></span><br><span class="line">  {</span><br><span class="line">     <span class="function"><span class="keyword">void</span> <span class="title">BePaint</span>(<span class="params"><span class="keyword">string</span> shape</span>)</span>;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<p><strong>具体实现类:</strong></p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Red</span> : <span class="title">Color</span></span><br><span class="line">   {</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">BePaint</span>(<span class="params"><span class="keyword">string</span> shape</span>)</span></span><br><span class="line"><span class="function"></span>       {</span><br><span class="line">           Console.WriteLine(<span class="string">"红色的"</span> + shape);</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Black</span> : <span class="title">Color</span></span><br><span class="line">   {</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">BePaint</span>(<span class="params"><span class="keyword">string</span> shape</span>)</span></span><br><span class="line"><span class="function"></span>       {</span><br><span class="line">           Console.WriteLine(<span class="string">"黑色的"</span> + shape);</span><br><span class="line">       }</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>
<p><strong>画出不同颜色不同形状的圆：</strong></p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Draw</span></span><br><span class="line">   {</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DoDraw</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>       {</span><br><span class="line">           Color red = <span class="keyword">new</span> Red();</span><br><span class="line">           Color black = <span class="keyword">new</span> Black();</span><br><span class="line">           Shape circle = <span class="keyword">new</span> Circle();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//画红色的圆</span></span><br><span class="line">           circle.SetColor(red);</span><br><span class="line">           circle.Draw();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//画黑色的圆</span></span><br><span class="line">           circle.SetColor(black);</span><br><span class="line">           circle.Draw();</span><br><span class="line"></span><br><span class="line">       }</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/13/Design-Pattern-享元模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/13/Design-Pattern-享元模式/" class="post-title-link" itemprop="url">Design_Pattern_享元模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-13 19:49:34" itemprop="dateCreated datePublished" datetime="2019-08-13T19:49:34+08:00">2019-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-17 23:32:30" itemprop="dateModified" datetime="2023-02-17T23:32:30+08:00">2023-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式：享元模式"><a href="#设计模式：享元模式" class="headerlink" title="设计模式：享元模式"></a>设计模式：享元模式</h1><h1 id="一、什么是享元模式？"><a href="#一、什么是享元模式？" class="headerlink" title="一、什么是享元模式？"></a>一、什么是享元模式？</h1><p><strong>享元模式（Flyweight）</strong>，运用共享技术有效地支持大量细粒度的对象。UML结构图如下：<br><img src="https://cdn.nlark.com/yuque/0/2019/png/225637/1547115239417-4616bc5b-775f-4362-b2b2-0a165997e94b.png#align=left&amp;display=inline&amp;height=316&amp;name=%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8FUML%E5%9B%BE.png&amp;originHeight=316&amp;originWidth=634&amp;size=21131&amp;width=634" alt="享元模式UML图.png"></p>
<p>Flyweight是抽象享元角色。它是产品的抽象类，同时定义出对象的外部状态和内部状态的接口或实现；ConcreteFlyweight是具体享元角色，是具体的产品类，实现抽象角色定义的业务；<br>UnsharedConcreteFlyweight是不可共享的享元角色，一般不会出现在享元工厂中；<br>FlyweightFactory是享元工厂，它用于构造一个池容器，同时提供从池中获得对象的方法。</p>
<h1 id="二、内部状态与外部状态的区分"><a href="#二、内部状态与外部状态的区分" class="headerlink" title="二、内部状态与外部状态的区分"></a>二、内部状态与外部状态的区分</h1><p>享元享元，共享细粒度的单元。那么什么是细粒度的单元呢？如果用乐高积木作比喻，那么一个积木人可以称为一个完整的对象。如果我们把积木人拆开，可以进一步得到头、身躯，腿三个部分。而这些部分，相比于完整的积木人而言，它们三个就是细粒度的单元。</p>
<p>那么为什么要把一个完整的对象区分内外部呢？这岂不是增加了代码的复杂度？好，我们暂时搁置，接下来思考这样一个问题，如果我们要创造 10 个积木人，用程序怎么表示呢？</p>
<p>我们先创建一个积木人的类，如下：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LegoMan</span></span><br><span class="line">{</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Head;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Torso;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Leg;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">LegoMan</span>(<span class="params"><span class="keyword">string</span> head, <span class="keyword">string</span> torso, <span class="keyword">string</span> leg</span>)</span></span><br><span class="line"><span class="function"></span>  {</span><br><span class="line">    <span class="keyword">this</span>.Head = head;</span><br><span class="line">    <span class="keyword">this</span>.Torso = torso;</span><br><span class="line">    <span class="keyword">this</span>.Leg = leg;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>接着我们开始创造积木人，先采用直接 new 的方式：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Example</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>) </span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">      LegoMan man1 = <span class="keyword">new</span> LegoMan(<span class="string">"head1"</span>, <span class="string">"torso1"</span>, <span class="string">"leg1"</span>);</span><br><span class="line">      LegoMan man2 = <span class="keyword">new</span> LegoMan(<span class="string">"head2"</span>, <span class="string">"torso2"</span>, <span class="string">"leg2"</span>);</span><br><span class="line">      ...</span><br><span class="line">      LegoMan man10 = <span class="keyword">new</span> LegoMan(<span class="string">"head10"</span>, <span class="string">"torso10"</span>, <span class="string">"leg10"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>现在我们得到了 10 个积木人，接下来我们对积木人作出一些限制，我们现在需要 10 个士兵积木人，由于士兵的制服统一，那么这一百个积木人的下半身是完全一样的，也就是说除了 Head，积木人的 Torso 和 Leg 都是一样的。现在我们继续创建十个士兵积木人。好吧，和上面的例子一样，只是传入的后两个参数均一致。</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LegoMan manN = <span class="keyword">new</span> LegoMan(<span class="string">"headN"</span>, <span class="string">"torsoStandard"</span>, <span class="string">"legStandard"</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>接下来，我们思考这样一个问题，如果需要 1000 个士兵积木人呢？如果采用一般的方式，需要创建 1000 个实例对象，但是这 1000 个对象都有着共同的部分，就是它们的 Torso 和 Leg。那我们可不可以把共同的部分抽取出来呢？当然可以，现在我们把 Torso 和 Leg 整合为一个 Body 类，如下：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Body</span></span><br><span class="line">{</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Torso;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Leg;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Body</span>(<span class="params"><span class="keyword">string</span> torso, <span class="keyword">string</span> leg</span>)</span></span><br><span class="line"><span class="function"></span>  {</span><br><span class="line">    <span class="keyword">this</span>.Torso = torso;</span><br><span class="line">    <span class="keyword">this</span>.Leg = leg;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>既然 Body 被提取出来了，那么 LegoMan 这个类也要被重写了，如下：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LegoMan</span></span><br><span class="line">{</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> Head;</span><br><span class="line">  <span class="keyword">public</span> Body BodyIntrinsic;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">LegoMan</span>(<span class="params"><span class="keyword">string</span> head, Body body</span>)</span></span><br><span class="line"><span class="function"></span>  {</span><br><span class="line">    <span class="keyword">this</span>.Head = head;</span><br><span class="line">    <span class="keyword">this</span>.BodyIntrinsic = body;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>现在我们再来创建 1000 个积木人士兵的话，应该是这样：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Example</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>) </span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">      <span class="comment">//先创建一个通用的 Body </span></span><br><span class="line">      Body bodyStandard = <span class="keyword">new</span> Body(<span class="string">"torsoStandard"</span>, <span class="string">"legStandard"</span>);</span><br><span class="line">      </span><br><span class="line">      LegoMan man1 = <span class="keyword">new</span> LegoMan(<span class="string">"head1"</span>, bodyStandard);</span><br><span class="line">      LegoMan man2 = <span class="keyword">new</span> LegoMan(<span class="string">"head2"</span>, bodyStandard);</span><br><span class="line">      ...</span><br><span class="line">      LegoMan man1000 = <span class="keyword">new</span> LegoMan(<span class="string">"head1000"</span>, bodyStandard);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>发现了吗？现在虽然也是1000个 LegoMan 的实例，但是却只有一个 Body，也就是说，1000个积木人士兵 的 Head，共享了一个 Body。听起来很疯狂，九头蛇也才九头，一千个头的怪物得多可怕！？哈哈，虽然积木人的玩具不可能这么拼，但是程序里，这种共享机制是可行的。Body 就是享元模式中的内部状态，一个重复度很高的细粒度单元。而 Head 则对应外部状态，会随着需求发生变化。这么分离的好处也很明显，就是大大减少了总数据量。如果不分离内外部，创建 1000 个积木人士兵的成本就是1000个 Head 和1000个 Body，而采用分离策略后，就只需要1000个 Head 外加1个 Body了。当随着创建对象数量级的增大，这种策略带来的好处会越来越明显。</p>
<h1 id="三、完整的享元模式"><a href="#三、完整的享元模式" class="headerlink" title="三、完整的享元模式"></a>三、完整的享元模式</h1><p>理解了分离内外部的原因后，下面简单实现一下享元模式</p>
<h2 id="1-Flyweight抽象类"><a href="#1-Flyweight抽象类" class="headerlink" title="1.Flyweight抽象类"></a>1.Flyweight抽象类</h2><p>通过最上面的 UML 图可以看出，Flyweight 被分为两部分，ConcreteFlyweight（共享的内部）和UnsharedConcreteFlyweight（不可共享的外部）。所以 Flyweight 最好被做成接口，或者抽象类，这里用抽象类实现，如下：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Flyweight</span> </span><br><span class="line">{</span><br><span class="line">    <span class="comment">//内部状态</span></span><br><span class="line">    <span class="keyword">public</span> String intrinsic;</span><br><span class="line">    <span class="comment">//外部状态</span></span><br><span class="line">    <span class="keyword">public</span> String extrinsic;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//要求享元角色必须接受外部状态</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Flyweight</span>(<span class="params">String extrinsic</span>) </span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="keyword">this</span>.extrinsic = extrinsic;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定义业务操作</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Operate</span>(<span class="params"><span class="keyword">int</span> extrinsic</span>)</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="2-ConcreteFlyweight类"><a href="#2-ConcreteFlyweight类" class="headerlink" title="2. ConcreteFlyweight类"></a>2. ConcreteFlyweight类</h2><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ConcreteFlyweight</span> : <span class="title">Flyweight</span> </span><br><span class="line">{</span><br><span class="line">    <span class="comment">//接受外部状态</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteFlyweight</span>(<span class="params">String extrinsic</span>):<span class="title">base</span>(<span class="params">extrinsic</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        Debug.Log(<span class="string">"共享的 "</span> + extrinsic);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据外部状态进行逻辑处理</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>(<span class="params"><span class="keyword">string</span> extrinsic</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        Debug.Log(<span class="string">"处理共享数据 "</span> + extrinsic);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-UnsharedConcreteFlyweight类"><a href="#3-UnsharedConcreteFlyweight类" class="headerlink" title="3. UnsharedConcreteFlyweight类"></a>3. UnsharedConcreteFlyweight类</h2><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnsharedConcreteFlyweight</span> : <span class="title">Flyweight</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UnsharedConcreteFlyweight</span>(<span class="params">String extrinsic</span>):<span class="title">base</span>(<span class="params">extrinsic</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        Debug.Log(<span class="string">"非共享的 "</span> + extrinsic);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>(<span class="params"><span class="keyword">int</span> extrinsic</span>) </span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        Debug.Log(<span class="string">"处理非共享数据 "</span> + extrinsic);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="4-FlyweightFactory类"><a href="#4-FlyweightFactory类" class="headerlink" title="4. FlyweightFactory类"></a>4. FlyweightFactory类</h2><p>既然是处理大量数据，那免不了用一个对象池来进行管理，如下：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FlyweightFactory</span> </span><br><span class="line">{</span><br><span class="line">    <span class="comment">//定义一个池容器</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Flyweight&gt; pool = <span class="keyword">new</span> List&lt;Flyweight&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//享元工厂</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Flyweight <span class="title">GetFlyweight</span>(<span class="params">String extrinsic</span>) </span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="keyword">var</span> flyweight = pool.Find(obj =&gt; obj.extrinsic == extrinsic);</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">if</span> (flyweight == <span class="literal">null</span>)</span><br><span class="line">        {</span><br><span class="line">            flyweight = <span class="keyword">new</span> ConcreteFlyweight(extrinsic);</span><br><span class="line">            pool.Add(flyweight);</span><br><span class="line">            Debug.Log(<span class="string">"新创建 "</span> + extrinsic);</span><br><span class="line">        }</span><br><span class="line">      	<span class="keyword">else</span></span><br><span class="line">      	{</span><br><span class="line">          	Debug.Log(<span class="string">"从池中取出 "</span> + extrinsic);</span><br><span class="line">      	}</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">return</span> flyweight;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="5-客户端的调用"><a href="#5-客户端的调用" class="headerlink" title="5.客户端的调用"></a>5.客户端的调用</h2><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        Flyweight flyweight1 = FlyweightFactory.GetFlyweight(<span class="string">"one"</span>);</span><br><span class="line">        flyweight1.Operate(<span class="string">"one"</span>);</span><br><span class="line">        </span><br><span class="line">        Flyweight flyweight2 = FlyweightFactory.GetFlyweight(<span class="string">"two"</span>);</span><br><span class="line">        flyweight2.Operate(<span class="string">"two"</span>);</span><br><span class="line">        </span><br><span class="line">        Flyweight flyweight3 = FlyweightFactory.getFlyweight(<span class="string">"one"</span>);</span><br><span class="line">        flyweight3.Operate(<span class="string">"one"</span>);</span><br><span class="line">        </span><br><span class="line">        Flyweight unsharedFlyweight = <span class="keyword">new</span> UnsharedConcreteFlyweight(<span class="string">"one"</span>);</span><br><span class="line">        unsharedFlyweight.operate(<span class="string">"one"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>打印结果如下：<br>新创建 one<br>处理共享数据 one<br>新创建 two<br>处理共享数据 two<br>从池中取出 one<br>处理共享数据 one<br>非共享的 one<br>处理非共享数据 one</p>
<p>参考博客：<br><a href="https://www.cnblogs.com/adamjwh/p/9070107.html" target="_blank" rel="noopener">https://www.cnblogs.com/adamjwh/p/9070107.html</a><br><a href="https://blog.csdn.net/justloveyou_/article/details/55045638" target="_blank" rel="noopener">https://blog.csdn.net/justloveyou_/article/details/55045638</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/13/Design-Pattern-命令模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhaori">
      <meta itemprop="description" content="笔记记录">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝日">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/13/Design-Pattern-命令模式/" class="post-title-link" itemprop="url">Design_Pattern_命令模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-13 19:49:20" itemprop="dateCreated datePublished" datetime="2019-08-13T19:49:20+08:00">2019-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-02-17 23:32:30" itemprop="dateModified" datetime="2023-02-17T23:32:30+08:00">2023-02-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式：命令模式"><a href="#设计模式：命令模式" class="headerlink" title="设计模式：命令模式"></a>设计模式：命令模式</h1><p><strong>命令模式在GoF中的定义是：</strong></p>
<blockquote>
<p>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化； 对请求排队或记录请求日志，以及支持可撤销的操作。<br>命令模式是一种回调的面向对象实现。</p>
</blockquote>
<p><strong>游戏设计模式里把它精简为：</strong></p>
<blockquote>
<p>命令是具现化的方法调用。</p>
</blockquote>
<p>两种术语都意味着将概念变成数据一个对象可以存储在变量中，传给函数。<br>所以称命令模式为“具现化方法调用”，意思是方法调用被存储在对象中。<br>类似C#里的回调<br>把一个对象传递到方法中，让方法内部解析。</p>
<p>下面是一个C#版本的角色控制，传入一个角色，就能调用对应的各种行动。</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 命令基类</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Command</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Execute</span>(<span class="params">BaseCharacter character</span>)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 跳的命令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">JumpCommand</span> : <span class="title">Command</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Execute</span>(<span class="params">BaseCharacter character</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        character.Jump();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 射击的命令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FireCommand</span> : <span class="title">Command</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Execute</span>(<span class="params">BaseCharacter character</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        character.Fire();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 移动的命令</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MoveCommand</span> : <span class="title">Command</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Execute</span>(<span class="params">BaseCharacter character</span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 对输入的解析</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">InputHandler</span></span><br><span class="line">{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JumpCommand buttonA;</span><br><span class="line">    <span class="keyword">private</span> FireCommand buttonD;</span><br><span class="line">    <span class="keyword">private</span> MoveCommand buttonW;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Command <span class="title">HandleInputAction</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.A)) { <span class="keyword">return</span> buttonA; }</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.D)) { <span class="keyword">return</span> buttonD; }</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.W)) { <span class="keyword">return</span> buttonW; }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Player mPlayer;</span><br><span class="line">    <span class="keyword">private</span> Enemy mEnemy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Command</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        Command command = HandleInputAction();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (command != <span class="literal">null</span>)</span><br><span class="line">        {</span><br><span class="line">            command.Execute(mPlayer);</span><br><span class="line">            command.Execute(mEnemy);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Player</span> : <span class="title">BaseCharacter</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="keyword">base</span>.Fire();</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Jump</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="keyword">base</span>.Jump();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Enemy</span> : <span class="title">BaseCharacter</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    {</span><br><span class="line">        <span class="keyword">base</span>.Fire();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> 角色的基类</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">BaseCharacter</span></span><br><span class="line">{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Jump</span>(<span class="params"></span>)</span> { }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fire</span>(<span class="params"></span>)</span> { }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhaori</p>
  <div class="site-description" itemprop="description">笔记记录</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zhaorigame" title="GitHub → https://github.com/zhaorigame" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:634901355@qq.com" title="E-Mail → mailto:634901355@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhaori</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>



  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>











<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  

  

</body>
</html>
